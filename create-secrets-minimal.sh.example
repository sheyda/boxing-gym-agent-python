#!/bin/bash

# Script to create ONLY the truly sensitive secrets in Google Cloud Secret Manager
# This script creates only the secrets that actually need to be protected

set -e

PROJECT_ID="your-project-id"

echo "🔐 Creating sensitive secrets in Google Cloud Secret Manager..."

# Only store truly sensitive data
echo "Creating Google OAuth2 credentials..."
echo "YOUR_GOOGLE_CLIENT_ID" | gcloud secrets create google-client-id --data-file=- --project=$PROJECT_ID 2>/dev/null || echo "google-client-id already exists"
echo "YOUR_GOOGLE_CLIENT_SECRET" | gcloud secrets create google-client-secret --data-file=- --project=$PROJECT_ID 2>/dev/null || echo "google-client-secret already exists"

echo "Creating LLM API key..."
echo "YOUR_OPENAI_API_KEY" | gcloud secrets create openai-api-key --data-file=- --project=$PROJECT_ID 2>/dev/null || echo "openai-api-key already exists"

echo "Creating Gmail tokens..."
if [ -f "tokens.json" ]; then
    cat tokens.json | gcloud secrets create gmail-tokens --data-file=- --project=$PROJECT_ID 2>/dev/null || echo "gmail-tokens already exists"
else
    echo "⚠️  Warning: tokens.json not found. You may need to create gmail-tokens secret manually."
fi

echo "Creating personal email (privacy consideration)..."
echo "your-email@gmail.com" | gcloud secrets create gmail-user-email --data-file=- --project=$PROJECT_ID 2>/dev/null || echo "gmail-user-email already exists"

echo "✅ Only sensitive secrets created!"
echo ""
echo "📋 Created secrets:"
gcloud secrets list --project=$PROJECT_ID --format="table(name,createTime)" | grep -E "(google-client|openai-api|gmail-tokens|gmail-user)"
